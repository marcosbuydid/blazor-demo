
@page "/login"
@using System.ComponentModel.DataAnnotations
@using Logic.Models
@inject NavigationManager NavigationManager

<h1>Login</h1>

<EditForm Model="@userLoginDTO" OnValidSubmit="HandleLogin">
    <DataAnnotationsValidator />

    @if (loginResult)
    {
        <div class="alert alert-danger" role="alert">
            Login failed. Please try again.
        </div>
    }

    <div class="form-group">
        <label for="email">Email:</label>
        <InputText id="email" @bind-Value="userLoginDTO.Email" class="form-control" />
        <ValidationMessage For="@(() => userLoginDTO.Email)" />
    </div>

    <div class="form-group">
        <label for="password">Password:</label>
        <InputText id="password" @bind-Value="userLoginDTO.Password" type="password" class="form-control" />
        <ValidationMessage For="@(() => userLoginDTO.Password)" />
    </div>

    <button type="submit" class="btn btn-primary mt-4">Login</button>
</EditForm>

@code {
    private UserLoginDTO userLoginDTO;
    private bool loginResult;

    protected override void OnInitialized()
    {
     userLoginDTO = new UserLoginDTO("","");
    }

    private async Task HandleLogin()
    {
        if (userLoginDTO.Email == "marcos@mail.com" && userLoginDTO.Password == "123456")
        {
            NavigationManager.NavigateTo("/");
        }
        else
        {
            loginResult = true;
        }
    }
}
